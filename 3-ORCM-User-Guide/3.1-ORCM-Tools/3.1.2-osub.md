The ‘osub’ tool provides user interface for new session request with the scheduler. This tool can also be used for submitting batch jobs along with the session request. Upon successful submission a session id will be returned.

Following shows osub –i interactive option flow:

![](3-ORCM-User-Guide/3.1-ORCM-Tools/osub.png)

Users will submit an allocation request using an OSUB tool with interactive option. OSUB tool will submit the request to the scheduler for an allocation and will receive a sessionid. The OSUB interactive mode option will wait till the nodes gets allocated, session daemons are launched and a VM ready message is received from the HNP daemon.

OSUB tool also opens a shell prompt to the user to launch jobs with the allocated nodes and HNP contact information set in the environment. The user will launch their jobs in this shell using ORUN tool.

Step 1: Job launch tool reads the HNP contact information from the environment and will continue to launch job process by sending the job information to the session HNP daemon. The job information includes application name, application args, number of processes to execute and other environment settings for the application process. 
 
Step 2: Upon job completion the session daemons will report the status back to the session HNP daemon and waits for command to terminate or launch additional processes. 

Step 3: When user exits the shell prompt a cancel command is sent to the session HNP daemon in turn will send a final job complete and terminate command to all the session daemons and exits.

The ‘osub’ tool command line options are described below:
```
osub [OPTION]...
```

To submit a new allocation request following is the syntax:
```
shell$ osub [--node <N>]  [-i]
```

Examples:
```
shell$ osub -n 4
shell$ osub –n 4  -i
```

The first command will send an allocate request (non blocking) for 4 nodes to the scheduler and reports session id back to the caller.  The second command will send an allocate request (blocking) for 4 nodes to the scheduler and waits for the allocation, upon allocation will open an interactive shell to launch jobs using orun. The allocation will be released upon exiting the shell.

The following are the options for _osub_:

* `-am <file list>`: Specify an aggregate MCA parameter set file list.
* `-b | --batchrun <script>`: Provide a path to a batch script file containing the list of applications to run.
* `-c | --constraints <constraints>`: Specify resource constraints to be applied.
* `-e | --exclusive`: Used to specify that allocated nodes should not be shared with other sessions.
* `-f | --nodefile <file>`: Specify the path to a file containing the list of names of the candidate nodes.
* `-gomca | --gomca <name> <value>`: Pass global MCA parameters that will apply to all contexts, where `<name>` is the parameter name and `<value>` is the parameter value.
* `-h | --help`: Print the _orun_ help text.
* `-i | --interactive`: Request a interactive mode.
* `-omca | --omca <name> <value>`: Pass context-specific MCA parameters, where `<name>` is the parameter name and `<value>` is the parameter value.  They are considered global if `--gomca` is not used and only one context is specified.
* `-P | --max-pe <n>`: Specify the maximum number of PEs allowed in the allocation.
* `-p | --pe <n>`: Specify the minimum number of PEs required for the allocation.
* `-s | --start <time>`: Specify the earliest date/time required to start the job.
* `-v | --verbose`: Request verbose output.
* `-w | --walltime <time>`: Specify the maximum duration for the job before it's terminated.

The following options are related to allocation requests sent to the scheduler:

* `--account <name>`: Provide an account to be charged.
* `--gid <ID>`: Provide a group ID to associate to the session.
* `-N | --max-node <n>`: Specify the maximum number of nodes allowed in the allocation.
* `-n | --node <n>`: Specify the minimum number of nodes required for the allocation.
* `--project <name>`: Provide a user-assigned project name.